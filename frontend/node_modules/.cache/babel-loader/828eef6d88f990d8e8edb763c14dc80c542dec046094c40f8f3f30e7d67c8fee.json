{"ast":null,"code":"import _objectSpread from\"D:/5th semester/internship (3)/Internship monitoring, 1DS23AI013, B N Sharath/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/AdminStudentManagement.js\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./AdminUI.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api=axios.create();api.interceptors.request.use(config=>{const token=localStorage.getItem(\"token\");if(token)config.headers.Authorization=\"Bearer \".concat(token);return config;});export default function AdminStudentManagement(){const[students,setStudents]=useState([]);const[form,setForm]=useState({name:\"\",email:\"\",password:\"\",department:\"\",batch:\"\"});const[loading,setLoading]=useState(false);const fetch=async()=>{try{const res=await api.get(\"/api/users?role=student\");setStudents(res.data);}catch(err){console.error(err);}};useEffect(()=>{fetch();},[]);const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const createStudent=async e=>{e.preventDefault();setLoading(true);try{await api.post(\"/api/users\",_objectSpread(_objectSpread({},form),{},{role:\"student\"}));setForm({name:\"\",email:\"\",password:\"\",department:\"\",batch:\"\"});fetch();}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Error\");}setLoading(false);};const remove=async id=>{if(!window.confirm(\"Delete student?\"))return;await api.delete(\"/api/users/\".concat(id));fetch();};return/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Manage Students\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"admin-form\",onSubmit:createStudent,children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:form.name,onChange:handleChange,placeholder:\"Name\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:form.email,onChange:handleChange,placeholder:\"Email\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:form.password,onChange:handleChange,placeholder:\"Password\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"department\",value:form.department,onChange:handleChange,placeholder:\"Department (id)\"}),/*#__PURE__*/_jsx(\"input\",{name:\"batch\",value:form.batch,onChange:handleChange,placeholder:\"Batch (id)\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"Adding...\":\"Add Student\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:students.map(s=>{var _s$department,_s$batch;return/*#__PURE__*/_jsxs(\"div\",{className:\"list-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:s.name}),\" \",/*#__PURE__*/_jsxs(\"small\",{children:[\"(\",s.email,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"muted\",children:[\"Role: \",s.role,\" Dept: \",((_s$department=s.department)===null||_s$department===void 0?void 0:_s$department.name)||\"-\",\" Batch: \",((_s$batch=s.batch)===null||_s$batch===void 0?void 0:_s$batch.name)||\"-\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:()=>remove(s._id),children:\"Delete\"})})]},s._id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","api","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","concat","AdminStudentManagement","students","setStudents","form","setForm","name","email","password","department","batch","loading","setLoading","fetch","res","get","data","err","console","error","handleChange","e","_objectSpread","target","value","createStudent","preventDefault","post","role","_err$response","_err$response$data","alert","response","message","remove","id","window","confirm","delete","className","children","onSubmit","onChange","placeholder","required","type","disabled","map","s","_s$department","_s$batch","onClick","_id"],"sources":["D:/5th semester/internship (3)/Internship monitoring, 1DS23AI013, B N Sharath/frontend/src/components/AdminStudentManagement.js"],"sourcesContent":["// src/components/AdminStudentManagement.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./AdminUI.css\";\r\n\r\nconst api = axios.create();\r\n\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) config.headers.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\nexport default function AdminStudentManagement() {\r\n  const [students, setStudents] = useState([]);\r\n  const [form, setForm] = useState({ name: \"\", email: \"\", password: \"\", department: \"\", batch: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetch = async () => {\r\n    try {\r\n      const res = await api.get(\"/api/users?role=student\");\r\n      setStudents(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { fetch(); }, []);\r\n\r\n  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const createStudent = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      await api.post(\"/api/users\", { ...form, role: \"student\" });\r\n      setForm({ name: \"\", email: \"\", password: \"\", department: \"\", batch: \"\" });\r\n      fetch();\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || \"Error\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const remove = async (id) => {\r\n    if (!window.confirm(\"Delete student?\")) return;\r\n    await api.delete(`/api/users/${id}`);\r\n    fetch();\r\n  };\r\n\r\n  return (\r\n    <div className=\"card admin-card\">\r\n      <h3>Manage Students</h3>\r\n\r\n      <form className=\"admin-form\" onSubmit={createStudent}>\r\n        <input name=\"name\" value={form.name} onChange={handleChange} placeholder=\"Name\" required />\r\n        <input name=\"email\" value={form.email} onChange={handleChange} placeholder=\"Email\" required />\r\n        <input name=\"password\" value={form.password} onChange={handleChange} placeholder=\"Password\" required />\r\n        <input name=\"department\" value={form.department} onChange={handleChange} placeholder=\"Department (id)\" />\r\n        <input name=\"batch\" value={form.batch} onChange={handleChange} placeholder=\"Batch (id)\" />\r\n        <button type=\"submit\" disabled={loading}>{loading ? \"Adding...\" : \"Add Student\"}</button>\r\n      </form>\r\n\r\n      <div className=\"list\">\r\n        {students.map(s => (\r\n          <div key={s._id} className=\"list-item\">\r\n            <div>\r\n              <strong>{s.name}</strong> <small>({s.email})</small>\r\n              <div className=\"muted\">Role: {s.role} Dept: {s.department?.name || \"-\"} Batch: {s.batch?.name || \"-\"}</div>\r\n            </div>\r\n            <div>\r\n              <button className=\"btn-danger\" onClick={() => remove(s._id)}>Delete</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}