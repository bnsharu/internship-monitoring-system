{"ast":null,"code":"import _objectSpread from\"D:/5th semester/internship (3)/Internship monitoring, 1DS23AI013, B N Sharath/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/App.js\nimport React,{useState,useEffect}from\"react\";import{BrowserRouter,Routes,Route,Navigate}from\"react-router-dom\";import axios from\"axios\";import\"./App.css\";// Components\nimport Navbar from\"./components/Navbar\";import Dashboard from\"./components/Dashboard\";import SearchBar from\"./components/SearchBar\";import InternshipForm from\"./components/InternshipForm\";import InternshipList from\"./components/InternshipList\";import Footer from\"./components/Footer\";import Login from\"./components/Login\";import Register from\"./components/Register\";import AdminPage from\"./components/AdminPage\";import MentorPage from\"./components/MentorPage\";// Protected route\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,role}=_ref;const token=localStorage.getItem(\"token\");const user=JSON.parse(localStorage.getItem(\"user\")||\"{}\");if(!token)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});if(role&&user.role!==role){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return children;};function App(){const[internships,setInternships]=useState([]);const[form,setForm]=useState({studentName:\"\",mentorName:\"\",company:\"\",duration:\"\",status:\"Pending\"});const[search,setSearch]=useState(\"\");const[editId,setEditId]=useState(null);const fetchData=async()=>{const res=await axios.get(\"/api/internships?search=\".concat(search));setInternships(res.data);};useEffect(()=>{fetchData();},[search]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();if(editId){await axios.put(\"/api/internships/\".concat(editId),form);setEditId(null);}else{await axios.post(\"/api/internships\",form);}setForm({studentName:\"\",mentorName:\"\",company:\"\",duration:\"\",status:\"Pending\"});fetchData();};const handleDelete=async id=>{await axios.delete(\"/api/internships/\".concat(id));fetchData();};const handleEdit=record=>{setForm(record);setEditId(record._id);};const DashboardPage=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Dashboard,{internships:internships}),/*#__PURE__*/_jsx(SearchBar,{search:search,setSearch:setSearch}),/*#__PURE__*/_jsx(InternshipForm,{form:form,handleChange:handleChange,handleSubmit:handleSubmit,editId:editId}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCB Internship Records\"}),/*#__PURE__*/_jsx(InternshipList,{internships:internships,handleEdit:handleEdit,handleDelete:handleDelete}),/*#__PURE__*/_jsx(Footer,{})]});return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:\"admin\",children:/*#__PURE__*/_jsx(AdminPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/mentor\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:\"mentor\",children:/*#__PURE__*/_jsx(MentorPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:\"student\",children:/*#__PURE__*/_jsx(DashboardPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Routes","Route","Navigate","axios","Navbar","Dashboard","SearchBar","InternshipForm","InternshipList","Footer","Login","Register","AdminPage","MentorPage","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","role","token","localStorage","getItem","user","JSON","parse","to","replace","App","internships","setInternships","form","setForm","studentName","mentorName","company","duration","status","search","setSearch","editId","setEditId","fetchData","res","get","concat","data","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","put","post","handleDelete","id","delete","handleEdit","record","_id","DashboardPage","className","path","element"],"sources":["D:/5th semester/internship (3)/Internship monitoring, 1DS23AI013, B N Sharath/frontend/src/App.js"],"sourcesContent":["// src/App.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./App.css\";\r\n\r\n// Components\r\nimport Navbar from \"./components/Navbar\";\r\nimport Dashboard from \"./components/Dashboard\";\r\nimport SearchBar from \"./components/SearchBar\";\r\nimport InternshipForm from \"./components/InternshipForm\";\r\nimport InternshipList from \"./components/InternshipList\";\r\nimport Footer from \"./components/Footer\";\r\nimport Login from \"./components/Login\";\r\nimport Register from \"./components/Register\";\r\nimport AdminPage from \"./components/AdminPage\";\r\nimport MentorPage from \"./components/MentorPage\";\r\n\r\n// Protected route\r\nconst ProtectedRoute = ({ children, role }) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  const user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\r\n\r\n  if (!token) return <Navigate to=\"/login\" replace />;\r\n\r\n  if (role && user.role !== role) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nfunction App() {\r\n  const [internships, setInternships] = useState([]);\r\n  const [form, setForm] = useState({\r\n    studentName: \"\",\r\n    mentorName: \"\",\r\n    company: \"\",\r\n    duration: \"\",\r\n    status: \"Pending\",\r\n  });\r\n  const [search, setSearch] = useState(\"\");\r\n  const [editId, setEditId] = useState(null);\r\n\r\n  const fetchData = async () => {\r\n    const res = await axios.get(`/api/internships?search=${search}`);\r\n    setInternships(res.data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [search]);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (editId) {\r\n      await axios.put(`/api/internships/${editId}`, form);\r\n      setEditId(null);\r\n    } else {\r\n      await axios.post(\"/api/internships\", form);\r\n    }\r\n\r\n    setForm({\r\n      studentName: \"\",\r\n      mentorName: \"\",\r\n      company: \"\",\r\n      duration: \"\",\r\n      status: \"Pending\",\r\n    });\r\n\r\n    fetchData();\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    await axios.delete(`/api/internships/${id}`);\r\n    fetchData();\r\n  };\r\n\r\n  const handleEdit = (record) => {\r\n    setForm(record);\r\n    setEditId(record._id);\r\n  };\r\n\r\n  const DashboardPage = () => (\r\n    <div className=\"container\">\r\n      <Dashboard internships={internships} />\r\n      <SearchBar search={search} setSearch={setSearch} />\r\n      <InternshipForm\r\n        form={form}\r\n        handleChange={handleChange}\r\n        handleSubmit={handleSubmit}\r\n        editId={editId}\r\n      />\r\n      <h2>ðŸ“‹ Internship Records</h2>\r\n      <InternshipList\r\n        internships={internships}\r\n        handleEdit={handleEdit}\r\n        handleDelete={handleDelete}\r\n      />\r\n      <Footer />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Navbar />\r\n      <Routes>\r\n        {/* Public Pages */}\r\n        <Route path=\"/login\" element={<Login />} />\r\n        <Route path=\"/register\" element={<Register />} />\r\n\r\n        {/* Role-Based Routes */}\r\n        <Route\r\n          path=\"/admin\"\r\n          element={\r\n            <ProtectedRoute role=\"admin\">\r\n              <AdminPage />\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/mentor\"\r\n          element={\r\n            <ProtectedRoute role=\"mentor\">\r\n              <MentorPage />\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        {/* Student Dashboard */}\r\n        <Route\r\n          path=\"/dashboard\"\r\n          element={\r\n            <ProtectedRoute role=\"student\">\r\n              <DashboardPage />\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        {/* Default redirect */}\r\n        <Route path=\"/\" element={<Navigate to=\"/dashboard\" />} />\r\n      </Routes>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}