{"ast":null,"code":"import _objectSpread from\"D:/5th semester/internship (3)/Internship monitoring, 1DS23AI013, B N Sharath/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/AdminMentorManagement.js\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./AdminUI.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api=axios.create();api.interceptors.request.use(config=>{const token=localStorage.getItem(\"token\");if(token)config.headers.Authorization=\"Bearer \".concat(token);return config;});export default function AdminMentorManagement(){const[mentors,setMentors]=useState([]);const[form,setForm]=useState({name:\"\",email:\"\",password:\"\"});const[loading,setLoading]=useState(false);const fetch=async()=>{try{const res=await api.get(\"/api/users?role=mentor\");setMentors(res.data);}catch(err){console.error(err);}};useEffect(()=>{fetch();},[]);const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const createMentor=async e=>{e.preventDefault();setLoading(true);try{await api.post(\"/api/users\",_objectSpread(_objectSpread({},form),{},{role:\"mentor\"}));setForm({name:\"\",email:\"\",password:\"\"});fetch();}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Error\");}setLoading(false);};const remove=async id=>{if(!window.confirm(\"Delete mentor?\"))return;await api.delete(\"/api/users/\".concat(id));fetch();};return/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Manage Mentors\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"admin-form\",onSubmit:createMentor,children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:form.name,onChange:handleChange,placeholder:\"Name\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:form.email,onChange:handleChange,placeholder:\"Email\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:form.password,onChange:handleChange,placeholder:\"Password\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"Adding...\":\"Add Mentor\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:mentors.map(m=>/*#__PURE__*/_jsxs(\"div\",{className:\"list-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:m.name}),\" \",/*#__PURE__*/_jsxs(\"small\",{children:[\"(\",m.email,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:()=>remove(m._id),children:\"Delete\"})})]},m._id))})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","api","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","concat","AdminMentorManagement","mentors","setMentors","form","setForm","name","email","password","loading","setLoading","fetch","res","get","data","err","console","error","handleChange","e","_objectSpread","target","value","createMentor","preventDefault","post","role","_err$response","_err$response$data","alert","response","message","remove","id","window","confirm","delete","className","children","onSubmit","onChange","placeholder","required","type","disabled","map","m","onClick","_id"],"sources":["D:/5th semester/internship (3)/Internship monitoring, 1DS23AI013, B N Sharath/frontend/src/components/AdminMentorManagement.js"],"sourcesContent":["// src/components/AdminMentorManagement.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./AdminUI.css\";\r\n\r\nconst api = axios.create();\r\n\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) config.headers.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\nexport default function AdminMentorManagement() {\r\n  const [mentors, setMentors] = useState([]);\r\n  const [form, setForm] = useState({ name: \"\", email: \"\", password: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetch = async () => {\r\n    try {\r\n      const res = await api.get(\"/api/users?role=mentor\");\r\n      setMentors(res.data);\r\n    } catch (err) { console.error(err); }\r\n  };\r\n\r\n  useEffect(() => { fetch(); }, []);\r\n\r\n  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const createMentor = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      await api.post(\"/api/users\", { ...form, role: \"mentor\" });\r\n      setForm({ name: \"\", email: \"\", password: \"\" });\r\n      fetch();\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || \"Error\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const remove = async (id) => {\r\n    if (!window.confirm(\"Delete mentor?\")) return;\r\n    await api.delete(`/api/users/${id}`);\r\n    fetch();\r\n  };\r\n\r\n  return (\r\n    <div className=\"card admin-card\">\r\n      <h3>Manage Mentors</h3>\r\n\r\n      <form className=\"admin-form\" onSubmit={createMentor}>\r\n        <input name=\"name\" value={form.name} onChange={handleChange} placeholder=\"Name\" required />\r\n        <input name=\"email\" value={form.email} onChange={handleChange} placeholder=\"Email\" required />\r\n        <input name=\"password\" value={form.password} onChange={handleChange} placeholder=\"Password\" required />\r\n        <button type=\"submit\" disabled={loading}>{loading ? \"Adding...\" : \"Add Mentor\"}</button>\r\n      </form>\r\n\r\n      <div className=\"list\">\r\n        {mentors.map(m => (\r\n          <div key={m._id} className=\"list-item\">\r\n            <div>\r\n              <strong>{m.name}</strong> <small>({m.email})</small>\r\n            </div>\r\n            <div>\r\n              <button className=\"btn-danger\" onClick={() => remove(m._id)}>Delete</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}